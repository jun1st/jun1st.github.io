{"expireTime":9007200871994876000,"key":"transformer-remark-markdown-html-ast-f6cd88bf2c96897bf9c3694920a0bc92-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-autolink-headersgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-external-links-","val":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"下载 Zookeeper","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":15,"offset":15}}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":17,"offset":17}}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":17,"offset":17}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"目前的版本是 3.4.13， 下载最新稳定版, 在本地配置一个为集群。","position":{"start":{"line":4,"column":1,"offset":19},"end":{"line":4,"column":36,"offset":54}}}],"position":{"start":{"line":4,"column":1,"offset":19},"end":{"line":4,"column":36,"offset":54}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"配置实例","position":{"start":{"line":6,"column":3,"offset":58},"end":{"line":6,"column":7,"offset":62}}}],"position":{"start":{"line":6,"column":1,"offset":56},"end":{"line":6,"column":9,"offset":64}}}],"position":{"start":{"line":6,"column":1,"offset":56},"end":{"line":6,"column":9,"offset":64}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"把 zookeeper 解压到你的用户根目录下，创建三个实例配置文件","position":{"start":{"line":8,"column":1,"offset":66},"end":{"line":8,"column":35,"offset":100}}}],"position":{"start":{"line":8,"column":1,"offset":66},"end":{"line":8,"column":35,"offset":100}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">    <span class=\"token function\">cp</span> zoo_sample.cfg zoo-slave1.cfg\n    <span class=\"token function\">cp</span> zoo_sample.cfg zoo-slave2.cfg\n    <span class=\"token function\">cp</span> zoo_sample.cfg zoo-slave3.cfg</code></pre></div>","position":{"start":{"line":10,"column":1,"offset":102},"end":{"line":14,"column":4,"offset":224}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"修改配置文件：","position":{"start":{"line":16,"column":1,"offset":226},"end":{"line":16,"column":8,"offset":233}}}],"position":{"start":{"line":16,"column":1,"offset":226},"end":{"line":16,"column":8,"offset":233}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">    <span class=\"token comment\"># sub zoo-slave1.cfg</span>\n\n    <span class=\"token comment\"># The number of milliseconds of each tick</span>\n    <span class=\"token assign-left variable\">tickTime</span><span class=\"token operator\">=</span><span class=\"token number\">2000</span>\n    <span class=\"token comment\"># The number of ticks that the initial</span>\n    <span class=\"token comment\"># synchronization phase can take</span>\n    <span class=\"token assign-left variable\">initLimit</span><span class=\"token operator\">=</span><span class=\"token number\">10</span>\n    <span class=\"token comment\"># The number of ticks that can pass between</span>\n    <span class=\"token comment\"># sending a request and getting an acknowledgement</span>\n    <span class=\"token assign-left variable\">syncLimit</span><span class=\"token operator\">=</span><span class=\"token number\">5</span>\n    <span class=\"token comment\"># the directory where the snapshot is stored.</span>\n    <span class=\"token comment\"># do not use /tmp for storage, /tmp here is just</span>\n    <span class=\"token comment\"># example sakes.</span>\n    <span class=\"token assign-left variable\">dataDir</span><span class=\"token operator\">=</span>/users/fengd/zk-data/slave1/data\n\n    <span class=\"token comment\"># the port at which the clients will connect</span>\n    <span class=\"token assign-left variable\">clientPort</span><span class=\"token operator\">=</span><span class=\"token number\">2181</span>\n\n    server.1<span class=\"token operator\">=</span>localhost:2887:3887\n    server.2<span class=\"token operator\">=</span>localhost:2888:3888\n    server.3<span class=\"token operator\">=</span>localhost:2889:3889\n\n    <span class=\"token comment\"># the maximum number of client connections.</span>\n    <span class=\"token comment\"># increase this if you need to handle more clients</span>\n    <span class=\"token comment\">#maxClientCnxns=60</span>\n    <span class=\"token comment\">#</span>\n    <span class=\"token comment\"># Be sure to read the maintenance section of the</span>\n    <span class=\"token comment\"># administrator guide before turning on autopurge.</span>\n    <span class=\"token comment\">#</span>\n    <span class=\"token comment\">#</span>\n    <span class=\"token comment\">#</span>\n    <span class=\"token comment\"># The number of snapshots to retain in dataDir</span>\n    <span class=\"token comment\">#autopurge.snapRetainCount=3</span>\n    <span class=\"token comment\"># Purge task interval in hours</span>\n    <span class=\"token comment\"># Set to \"0\" to disable auto purge feature</span>\n    <span class=\"token comment\">#autopurge.purgeInterval=1</span></code></pre></div>","position":{"start":{"line":18,"column":1,"offset":235},"end":{"line":55,"column":4,"offset":1347}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"配置文件都有详细的说明，需要创建的文件夹是 dataDir， 每个配置文件制定的文件目录都需要创建。","position":{"start":{"line":57,"column":1,"offset":1349},"end":{"line":57,"column":51,"offset":1399}}}],"position":{"start":{"line":57,"column":1,"offset":1349},"end":{"line":57,"column":51,"offset":1399}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"此外还需要在对应的每个 dataDir 下创建每个 instance 对应的 id","position":{"start":{"line":59,"column":1,"offset":1401},"end":{"line":59,"column":42,"offset":1442}}}],"position":{"start":{"line":59,"column":1,"offset":1401},"end":{"line":59,"column":42,"offset":1442}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://cdn-images-1.medium.com/max/1600/1*e58a88PXmiUyj_Utvknjkw.png","alt":null},"children":[],"position":{"start":{"line":61,"column":1,"offset":1444},"end":{"line":61,"column":75,"offset":1518}}}],"position":{"start":{"line":61,"column":1,"offset":1444},"end":{"line":61,"column":75,"offset":1518}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"每个 myid 的值对应的是你的配置文件里， server.{id} 的值， 因为在一台机器上模拟一个伪集群，所以 clientPort 也都是不同的。","position":{"start":{"line":63,"column":1,"offset":1520},"end":{"line":63,"column":77,"offset":1596}}}],"position":{"start":{"line":63,"column":1,"offset":1520},"end":{"line":63,"column":77,"offset":1596}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"启动集群","position":{"start":{"line":65,"column":3,"offset":1600},"end":{"line":65,"column":7,"offset":1604}}}],"position":{"start":{"line":65,"column":1,"offset":1598},"end":{"line":65,"column":9,"offset":1606}}}],"position":{"start":{"line":65,"column":1,"offset":1598},"end":{"line":65,"column":9,"offset":1606}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"通过不同的配置文件启动 instance","position":{"start":{"line":67,"column":1,"offset":1608},"end":{"line":67,"column":21,"offset":1628}}}],"position":{"start":{"line":67,"column":1,"offset":1608},"end":{"line":67,"column":21,"offset":1628}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">    <span class=\"token comment\"># cd ~/zookeeper/bin</span>\n\n    ./zkServer.sh start <span class=\"token punctuation\">..</span>/conf/zoo-slave1.cfg\n    ./zkServer.sh start <span class=\"token punctuation\">..</span>/conf/zoo-slave2.cfg\n    ./zkServer.sh start <span class=\"token punctuation\">..</span>/conf/zoo-slave3.cfg</code></pre></div>","position":{"start":{"line":69,"column":1,"offset":1630},"end":{"line":75,"column":4,"offset":1808}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"查看状态","position":{"start":{"line":77,"column":3,"offset":1812},"end":{"line":77,"column":7,"offset":1816}}}],"position":{"start":{"line":77,"column":1,"offset":1810},"end":{"line":77,"column":9,"offset":1818}}}],"position":{"start":{"line":77,"column":1,"offset":1810},"end":{"line":77,"column":9,"offset":1818}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"查看是否启动成功","position":{"start":{"line":79,"column":1,"offset":1820},"end":{"line":79,"column":9,"offset":1828}}}],"position":{"start":{"line":79,"column":1,"offset":1820},"end":{"line":79,"column":9,"offset":1828}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">jps\n\n13120 QuorumPeerMain\n13174 QuorumPeerMain\n13191 Jps\n13147 QuorumPeerMain</code></pre></div>","position":{"start":{"line":81,"column":1,"offset":1830},"end":{"line":86,"column":25,"offset":1927}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"产看每个实例的状态","position":{"start":{"line":88,"column":1,"offset":1929},"end":{"line":88,"column":10,"offset":1938}}}],"position":{"start":{"line":88,"column":1,"offset":1929},"end":{"line":88,"column":10,"offset":1938}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://cdn-images-1.medium.com/max/1600/1*ZUX4jl78J8b-aNk9XrVNVQ.png","alt":null},"children":[],"position":{"start":{"line":90,"column":1,"offset":1940},"end":{"line":90,"column":75,"offset":2014}}}],"position":{"start":{"line":90,"column":1,"offset":1940},"end":{"line":90,"column":75,"offset":2014}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"启动成功，装好了再来玩～","position":{"start":{"line":92,"column":1,"offset":2016},"end":{"line":92,"column":13,"offset":2028}}}],"position":{"start":{"line":92,"column":1,"offset":2016},"end":{"line":92,"column":13,"offset":2028}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":92,"column":13,"offset":2028}}}}