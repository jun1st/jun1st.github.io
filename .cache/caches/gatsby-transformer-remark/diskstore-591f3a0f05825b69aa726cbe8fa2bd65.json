{"expireTime":9007200836088015000,"key":"transformer-remark-markdown-html-a796a4023799b08b0d2aebd441160a81-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-autolink-headersgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-external-links-","val":"<p><a href=\"https://medium.com/@jun1st/%C3%A4%C2%BD%C2%BF%C3%A7%C2%94%C2%A8-spring-cloud-%C3%A6%C2%9E%C2%84%C3%A5%C2%BB%C2%BA%C3%A5%C2%BE%C2%AE%C3%A6%C2%9C%C2%8D%C3%A5%C2%8A%C2%A1%C3%A4%C2%B9%C2%8B%C3%A4%C2%B8%C2%80-eureka-3e07eb8dba31\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">上一片构建了一个 Eureka\nServer，服务注册发现服务</a>，\n现在就来注册一个服务，作为服务的提供者。</p>\n<p><strong>添加 Eureka 依赖</strong></p>\n<p>还是建一个 Spring Boot 应用，需要添加的依赖有</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.cloud<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-cloud-starter-eureka<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><strong>配置 Eureka 属性</strong></p>\n<p>需要给应用起个名字，作为自己的唯一 ID 在 Eureka Server 上注册自己，并且需要声明 Eureka Server 的地址：</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">spring.application.name=service<span class=\"token punctuation\">-</span>provider\neureka.client.serviceUrl.defaultZone=http<span class=\"token punctuation\">:</span>//localhost<span class=\"token punctuation\">:</span>8000/eureka\neureka.instance.prefer<span class=\"token punctuation\">-</span>ip<span class=\"token punctuation\">-</span>address=true</code></pre></div>\n<p>prefer-ip-address 看自己偏好选择。</p>\n<p>同时给 Spring Boot 应用添加 EnableEurekaClient 注解，Spring Boot 应用就会想指定的 server 注册自己。</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@EnableEurekaClient</span>\n<span class=\"token annotation punctuation\">@SpringBootApplication</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ServiceProviderApplication</span> <span class=\"token punctuation\">{</span>\n\n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ServiceProviderApplication</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>在启动 Eureka Server 的同时，启动 Service Provider 应用，应该就可以在 Server 的页面上看到这个服务已经注册上去了。</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1600/1*zKMpGIa83TwQsdfccTpdTw.png\"></p>\n<p><a href=\"https://github.com/jun1st/service-provider\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Demo 地址</a></p>"}